<html>

<head>

    <script>
        window.onload = () => {

            fetch("/api/dashboards").then(a => a.json()).then(arr => {
                arr.forEach(element => {
                    let li = document.createElement("li");
                    li.innerText = element.title;
                    li.onclick = () => {
                        loadDashboard(element.id);
                    }
                    li.style.cursor = "pointer";
                    document.getElementById("dashboard-list").appendChild(li);
                });
            })
            fetch("/api/reports").then(a => a.json()).then(arr => {
                arr.forEach(element => {
                    let li = document.createElement("li");
                    li.innerText = element.title;
                    li.onclick = () => {
                        loadReport(element.id);
                    }
                    li.style.cursor = "pointer";
                    document.getElementById("report-list").appendChild(li);
                });
            })
        }

        function loadReport(id) {
            fetch("/api/reports/" + id).then(a => a.json()).then(obj => {
                console.log(obj)
                document.getElementById("iframe").setAttribute("src", obj.url)
            })
        }
        function loadDashboard(id) {
            fetch("/api/dashboards/" + id).then(a => a.json()).then(obj => {
                console.log(obj)
                document.getElementById("iframe").setAttribute("src", obj.url)
            })
        }
    </script>
</head>

<body style="padding: 0; margin: 0; display: flex; flex-direction: row;">
    <div style="width: 300px; height: 100vh; padding:8px">
        <h1>Dashboards</h1>
        <ol id="dashboard-list"></ol>
        <h1>Reports</h1>
        <ol id="report-list"></ol>
    </div>

    <iframe frameborder="0" style="width: 100vw; height: 100vh; background: #eee;" id="iframe" />
</body>

</html>